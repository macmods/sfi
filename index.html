<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no"/>
    <title>Seaweed Farming Index</title>
    <link rel="stylesheet" href="https://js.arcgis.com/4.17/esri/themes/light/main.css"/>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto&display=swap"/>
    <!-- Load the Chart.js library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.8.0/Chart.min.js"></script>
    <script src="https://js.arcgis.com/4.17/"></script>
    <script type="module" src="js/main.js"></script>
    <script src="js/nav.js"></script>
    <link rel="shortcut icon" href="images/favicon.ico" />
    <link rel="stylesheet" type="text/css" href="css/main.css" />
    <link rel="stylesheet" type="text/css" href="css/summary_report.css" />
  </head>

  <body>
    <h1>Seaweed Farming Index</h1>

    <div class="navbar">
      <button
        id="layer-toggle"
        class="nav-button"
        onclick="navButton('layer-toggle')"
        title="Data Layers"
      >
        <input class="icons" type="image" src="images/nav-layer-toggle.png" />
      </button>
      <button
        id="sfi-calc"
        class="nav-button"
        onclick="navButton('sfi-calc')"
        title="Calculate Seaweed Farming Index"
      >
        <input class="icons" type="image" src="images/nav-sfi-calc.png" />
      </button>
      <button
        id="report-sfi"
        class="nav-button"
        onclick="navButton('report-sfi')"
        title="Query Report"
      >
        <input class="icons" type="image" src="images/nav-report.png" />
      </button>
      <a href="https://faculty.sites.uci.edu/davis/" target="_blank">
        <img class="icons" src="/images/Coastal_Dynamics_Sketches_NoText.png" title="Costal Dynamics Lab"/>
      </a>
    </div>

    <div id="viewDiv"></div>
    <ul style="list-style-type: none">
      <span id="layerToggle" class="esri-widget">
        <li>
          <input type="checkbox" id="kelpProductivityLayer" /> Kelp Productivity
        </li>
        <div id="checkbox" style="font-weight: bold">
          Operational Constraints
        </div>
        <li>
          <input type="checkbox" id="principalPortsLayer" /> Principal Ports
        </li>
        <li><input type="checkbox" id="bathymetryLayer" /> Bathymetry</li>
        <div id="checkbox" style="font-weight: bold">
          Marine Spatial Planning
        </div>
        <li>
          <input type="checkbox" id="shippingLanesLayer" /> Shipping Lanes
        </li>
        <li>
          <input type="checkbox" id="dangerZonesAndRestrictedAreasLayer" />
          Danger Zones and Restricted Areas
        </li>
        <li>
          <input type="checkbox" id="mpaInventoryLayer" /> Marine Protected Area
          Inventory
        </li>
        <li>
          <input type="checkbox" id="federalAndStateWatersLayer" /> Federal and
          State Waters
        </li>
      </span>
    </ul>

    <!-- User Input Query SFI -->
    <div id="sfiCalc" class="esri-widget" style="display: none">
      <h2 id="oc">Operational Constraints</h2>
      Minimum Seafloor Depth (m)
      <div id="minOCDepthSlider" class="slider"></div>

      Maximum Seafloor Depth (m)
      <div id="maxOCDepthSlider" class="slider"></div>

      Maximum Distance to Port (km)
      <div id="maxOCToPortSlider" class="slider"></div>

      <h2>Weighting Factor</h2>
      <h3>Relative importance of</h3>
      <table style="max-width: 400px">
        <tr>
          <td><p>Farm Productivity</p></td>
          <td id="sliderColumn">
            <div id="weightingFactor" class="slider"></div>
          </td>
          <td><p>Operational Constraints</p></td>
        </tr>
      </table>

      <h2>Marine Spatial Planning</h2>

      <div class="msp">
        <input type="checkbox" id="excludeFederal" /> Federal Water Excluded
      </div>
      <div class="msp">
        <input type="checkbox" id="excludeState" /> State Water Excluded
      </div>
      <div class="msp">
        <input type="checkbox" id="excludeShippingLanes" /> Shipping Lanes
        Excluded
      </div>
      <div class="msp">
        <input type="checkbox" id="excludeRestrictedArea" /> Restricted And
        Dangerous Area Excluded
      </div>
      <div class="msp">
        <input type="checkbox" id="excludeMPA" /> Marine Protected Area
        Inventory Excluded
      </div>
      <br />
      <button class="esri-button" id="query-sfi" type="button">
        Calculate SFI
      </button>
      <br />
      <button class="esri-button" id="clear-report" type="button">
        Clear Report
      </button>
    </div>

    <!-- Geometry Query -->
    <div id="queryDiv" class="esri-widget" style="display: none">
      <b>Query by Polygon</b><br />
      <br />Draw a polygon to query:
      <div class="geometry-options">
        <button
          class="esri-widget--button esri-icon-polygon geometry-button"
          id="polygon-geometry-button"
          value="polygon"
          title="Query by polygon"
        ></button>
      </div>
      <br />
      <button class="esri-button" id="clearGeometry" type="button">
        Clear
      </button>
      <br />
      <button class="esri-button" id="printPage" type="button">
        Print Page
      </button>
    </div>

    <!-- Summary Report -->
    <div id="resultDiv" class="esri-widget">
      <span class="reportHead">Seaweed Farming Index Report</span>
      <div class="progress-container">
        <div class="progress-bar" id="myBar"></div>
      </div>
      <div id="content">
        <span class="subHead">GENERAL INFORMATION</span>
        <p>
          The report provides an analysis of the Seaweed Farming Index for the
          selected area along with a breakdown of the calculation of the index
          and information for the size, seafloor depth, jurisdictional
          boundaries, and proximity to port of the selected area.
        </p>

        <div class="nestedSections">
          <span class="subHead">Seaweed Farming Index</span>
          <hr />
          <p>
            The Seaweed Farming Index varies from zero to one, where high values
            are more favorable to farming, lower values are less favorable, and
            a value of zero is exclusive to farming. The Index incorporates both
            potential kelp productivity and those operational constraints
            selected by the user.
          </p>
          <div class="statement">
            <span>The average value of the selected area is</span>
            <div id="sfiOutput"></div>
            <span>Histogram of Seaweed Farming Index (SFI)</span>
            <div id="sfiHistogram">Histogram Here</div>
          </div>
        </div>

        <div class="nestedSections">
          <span class="subHead">Attribution Analaysis</span>
          <hr />
          <p>
            The breakdown of the Seaweed Farming Index for the selected area is
            as follows:
          </p>
          <div class="statement">
            <div id="sfiFormula">Formula Here</div>
          </div>
        </div>

        <div class="nestedSections">
          <span class="subHead">Report Area</span>
          <hr />
          <div class="statement">
            <span>The average value of the selected area is</span>
            <div id="reportAreaOut">XX km<sup>2</sup></div>
          </div>
        </div>

        <div class="nestedSections">
          <span class="subHead">Seafloor Depth</span>
          <hr />
          <p>
            Seafloor depth is an important consideration for farm installation
            and operational costs. Minimum, maximum and average seafloor depth
            (meters) are reported as positive values below the sea surface.
          </p>
          <div class="statement">
            <table>
              <tr id="depthOutput">
                <td>
                  <div id="avgDepth"></div>
                </td>
                <td>
                  <div id="minDepth"></div>
                </td>
                <td>
                  <div id="maxDepth"></div>
                </td>
              </tr>
              <tr>
                <td>average</td>
                <td>minimum</td>
                <td>maximum</td>
              </tr>
            </table>
            <span>
              The minimum and maximum seafloor depth available to seaweed
              farming was selected as <span id="minDepthAvailable">XX</span> and
              <span id="maxDepthAvailable">XXXX</span>, respectively
            </span>
          </div>
        </div>

        <div class="nestedSections">
          <span class="subHead">Distance to Port</span>
          <hr />
          <p>
            Distance to the nearest port or harbor is an important consideration
            for farm access and operational costs.
          </p>
          <div class="statement">
            <div id="portOutput">XX km to Port Name</div>
            <span>
              The maximum allowable distance to port was selected as
              <span id="maxAllowableDistanceToPort">XX</span>
            </span>
          </div>
        </div>

        <div class="nestedSections">
          <span class="subHead">Jurisdictional Boundaries</span>
          <hr />
          <p>
            Seaweed farming activities can fall within differing governing
            jurisdictions. Having a clear understanding of the jurisdictions in
            which a proposed activity might occur will help determine which
            statutes, regulations, and administrative procedures must be
            addressed. The report shows the breakdown of the selected area which
            falls within federal versus state waters.
          </p>
          <div class="statement">
            <canvas id="jurisdictionPieChart" width="250" height="300" />
          </div>
        </div>
      </div>
    </div>

    <!-- Coordinates widget -->
    <div id="coordsWidget" class="esri-widget esri-component"></div>

    <!-- Distance Measurement -->
    <div id="measureBar">
      <button
        class="action-button esri-icon-measure-line"
        id="distanceButton"
        type="button"
        title="Measure distance between two or more points"
      ></button>
      <button
        class="action-button esri-icon-measure-area"
        id="areaButton"
        type="button"
        title="Measure area"
      ></button>
    </div>
  </body>
</html>
